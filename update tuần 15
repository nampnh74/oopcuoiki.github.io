<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>object oriented programming</title>
</head>
<body>
    <div>
        <p>LD: Le Minh Tai 20149058</p>
        <p>Khamsavath bounmy 20110L02</p>
        <p>Phan Nguyen Hoai Nam 20110080</p>
    </div>
    <div>
        <?php
        interface KetHop{
            public function KetHopChieuThuc1($var);
            public function KetHopChieuThuc2($var);
        }
        trait AoChoangVai{
            protected $doBenGiap = 15;
            public function Get_DoBenGiap()
            {
                return $this->doBenGiap;
            }
            public function Set_DoBenGiap($DoBenGiap)
            {
                $this->doBenGiap = $DoBenGiap;
            }
        }
        trait AoDa{
            protected $doBenGiap = 20;
            public function Get_DoBenGiap()
            {
                return $this->doBenGiap;
            }
            public function Set_DoBenGiap($DoBenGiap)
            {
                $this->doBenGiap = $DoBenGiap;
            }
        }
        trait AoLuoi{
            protected $doBenGiap = 25;
            public function Get_DoBenGiap()
            {
                return $this->doBenGiap;
            }
            public function Set_DoBenGiap($DoBenGiap)
            {
                $this->doBenGiap = $DoBenGiap;
            }
        }     
        trait HuyetKiem{
            protected $satThuong = 80;
            public function KhatMau($var)// ai khat mau
            {
                $var->Set_mau($var->Get_mau()+40);
                return $this->satThuong;
            }
            public function Get_SatThuong()
            {
                return $this->satThuong;
            }
            public function Set_SatThuong($satThuong)
            {
                $this->satThuong = $satThuong;
            }
        }
        trait SongRiu{
            protected $satThuong = 45;
            public function NemVaChem()
            {
                return $this->sathuong*2;
            }
            public function Get_SatThuong()
            {
                return $this->satThuong;
            }
            public function Set_SatThuong($satThuong)
            {
                $this->satThuong = $satThuong;
            }
        }
        trait BuaTa{
            protected $satThuong =60;
            public function LamChoang($var) //lam choang ai
            {
                $var->Set_DoBenGiap(0);
                return 0;
            }
            public function Get_SatThuong()
            {
                return $this->satThuong;
            }
            public function Set_SatThuong($satThuong)
            {
                $this->satThuong = $satThuong;
            }
        }
        trait GayPhep{     
            protected $satThuong = 60;
            public function TangSucManh()
            {
                $this->satThuong=$this->satThuong+20;
            }
            public function Get_SatThuong()
            {
                return $this->satThuong;
            }
            public function Set_SatThuong($satThuong)
            {
                $this->satThuong = $satThuong;
            }
        }
        class NhanVat {
            protected $diemKhaNang;
            private $faction=array(1=>"SatThu",2=>"KyBinh",3=>"BoBinh",4=>"PhapSu",5=>"TruTa",6=>"TuSi");
            protected $phai;
            protected $mau;
            protected $cap;
            protected $ten;
            public function __construct($DiemKhaNang,$i,$Mau,$Cap,$Ten)
            {
                $this->diemKhaNang =$DiemKhaNang;
                $this->mau=$Mau;
                $this->phai=$this->faction[$i];
                $this->cap=$Cap;
                $this->ten=$Ten;
            }
            public function Trang_thai()
            {
                if($this->mau>0){
                    echo "{$this->ten} con song </br>";
                    return 1;
                }
                else{
                    echo "{$this->ten} da chet <\br>";
                    return 0;
                }
            }
            public function ThongTin()
            {
                echo "ten: {$this->ten} </br>";
                echo "diem kha nang: {$this->diemKhaNang} </br>";
                echo "phai: {$this->phai} </br>";
                echo "mau: {$this->mau} </br>";
                echo "cap: {$this->cap} </br>";

            }
            public function Get_phai()
            {
                return $this->phai;
            }
            public function Set_phai($i)
            {
                $this->phai=$this->faction[$i];
            }
            public function Get_diemKhaNang()
            {
              return $this->diemKhaNang;
            }
            public function Set_diemkhanang($i)
            {
                $this->diemKhaNang=$i;
            }
            public function Get_mau()
            {
              return $this->mau;
            }
            public function Set_mau($i)
            {
                $this->mau=$i;
            }
            public function Get_cap()
            {
              return $this->cap;
            }
            public function Set_cap($i)
            {
                $this->cap=$i;
            }
            public function Get_ten()
            {
              return $this->ten;
            }
            public function Set_ten($i)
            {
                $this->ten=$i;
            }
        }
        class NguoiChoi{
            public static function ThoatTroChoi()
            {
                echo "Da thoat tro choi </br>";
            }
            public static function XuatThongTinToanBoNguoiChoi($DanhSach)
            {
               foreach ($DanhSach as $key => $value){
                echo "nguoi choi: $key </br>";
                echo "ten: {$value->Get_ten()} </br>";
                echo "diem kha nang: {$value->Get_diemKhaNang()} </br>";
                echo "phai: {$value->Get_phai()} </br>";
                echo "mau: {$value->Get_mau()} </br>";
                echo "cap: {$value->Get_cap()} </br></br>";
               }
            }
            public static function A_TanCong_B($A,$B){
                if($A->TanCong()>$B->PhongThu()){
                    if($B->Get_mau()<=0){echo "{$B->Get_ten()} da chet </br>";}
                    else{
                        $B->Set_mau($B->Get_mau()-($A->TanCong()-$B->PhongThu()));
                        if($B->Get_mau()<=0){
                            $A->Set_diemkhanang($A->Get_diemKhaNang()+1);
                        }
                    }
                }
            }
            public static function A_KhatMau_B($A,$B){
                if($A->TanCong($A)>$B->PhongThu()){
                    if($B->Get_mau()<=0){echo "{$B->Get_ten()} da chet </br>";}
                    else{
                        $B->Set_mau($B->Get_mau()-($A->KhatMau($A)-$B->PhongThu()));
                        if($B->Get_mau()<=0){
                            $A->Set_diemkhanang($A->Get_diemKhaNang()+1);
                        }
                    }
                }
            }
            public static function CapDo($Tuong)
            {              
                echo " cap do = {$Tuong->Get_cap()} </br>   ";
            }
            public static function DoiKhoa( $DanhSachNguoiChoi, $KhoaCu, $KhoaMoi ) {
                $DanhSachKhoa = array_keys( $DanhSachNguoiChoi );
                $DanhSachKhoa[ array_search( $KhoaCu, $DanhSachKhoa ) ] = $KhoaMoi;
                return array_combine( $DanhSachKhoa, $DanhSachNguoiChoi );
            }
            public static function ThemNguoiChoi(&$DanhSachNguoiChoi,$Tuong,$KhoaMoi)
            {
                array_push($DanhSachNguoiChoi,$Tuong);
                $DanhSachNguoiChoi = self::DoiKhoa($DanhSachNguoiChoi,array_key_last($DanhSachNguoiChoi),$KhoaMoi);
            }
        }
        abstract class CanChien extends NhanVat{
            protected $viTri = "Can Chien";
            public function Get_ViTri(){
                echo "{$this->ten} vi tri {$this->viTri}</br>";
            }
        }
        abstract class HoTro extends NhanVat{
            protected $viTri = "Ho Tro";
            public function Get_ViTri(){}
        }
        class SatThu extends CanChien implements KetHop{
            use HuyetKiem;
            use AoDa;
            public function TanCong()
            {
                return $this->satThuong;
            }
            public function PhongThu(){
                return $this->doBenGiap;
            }
            public function TraTan ($var)
            {
                $var->Set_mau($var->Get_mau()-$this->satThuong*2);
            }
            public function HaDoc ($var)
            {
                $var->Set_DoBenGiap(0);
            }
            public function AnThan ()
            {
               #code an than
            }
            public function KetHopChieuThuc1($var){
                $this->AnThan();
                $this->TraTan($var);
            }
            public function KetHopChieuThuc2($var){
                $this->AnThan();
                $this->HaDoc($var);
            }
        }
        class KyBinh extends CanChien{
            use BuaTa;
            use AoLuoi;
            public function TanCong()
            {
                return $this->satThuong;
            }
            public function PhongThu(){
                return $this->doBenGiap;
            }
             public function DonThanThanh ()
            {
                echo "{$this->Get_ten()} tien hanh don than thanh </br>";
            }
            public function ThanhTay ()
            {
                echo "{$this->Get_ten()} tien hanh thanh tay </br>";
            }
            public function HoaHinh ()
            {
                echo "{$this->Get_ten()} tien hanh hoa hinh </br>";
            }
        }
        class BoBinh extends CanChien implements KetHop{
            use SongRiu;
            use AoLuoi;
            public function TanCong()
            {
                return $this->satThuong;
            }
            public function PhongThu(){
                return $this->doBenGiap;
            }
            public function Get_ViTri(){
                echo "viet lai ham {$this->ten} vi tri {$this->viTri}</br>";
            }
            public function DanhDap ($var)
            {
                $var->Set_mau($var->Get_mau()-$this->satThuong*2);
            }
            public function KetLieu ($var)
            {
                $var->Set_mau(0);
                $this->diemKhaNang=$this->diemKhaNang+1;
            }
            public function CuongThe ()
            {
                $this->doBenGiap+20;
            }
            public function KetHopChieuThuc1($var){
                $this->CuongThe();
                $this->DanhDap($var);
            }
            public function KetHopChieuThuc2($var){
                $this->DanhDap($var);
                $this->KetLieu($var);
            }
        }
        class PhapSu extends HoTro{
            use GayPhep;
            use AoChoangVai;
            public function TanCong()
            {
                return $this->satThuong;
            }
            public function PhongThu(){
                return $this->doBenGiap;
            }
            public function Get_ViTri(){
                echo "{$this->ten} vi tri {$this->viTri}</br>";
            }
            public function CauLua ()
            {
                echo "{$this->Get_ten()} tien hanh cau Lua </br>";
            }
            public function HoiPhuc ()
            {
                echo "{$this->Get_ten()} tien hanh hoi phuc </br>";
            }
            public function Thien ()
            {
                echo "{$this->Get_ten()} tien hanh thien </br>";
            }
        }
        class TruTa extends HoTro{
            use HuyetKiem;
            use AoDa;
            public function TanCong()
            {
                return $this->satThuong;
            }
            public function PhongThu(){
                return $this->doBenGiap;
            }
            public function Get_ViTri(){
                echo "{$this->ten} vi tri {$this->viTri}</br>";
            }
            public function ThinhNoBongToi ()
            {
                echo "{$this->Get_ten()} tien hanh thinh no bong toi </br>";
            }
            public function ThinhNoMaCaRong ()
            {
                echo "{$this->Get_ten()} tien hanh thinh no ma ca rong </br>";
            }
            public function LaChan ()
            {
                echo "{$this->Get_ten()} tien hanh la chan </br>";
            }
        }
        class TuSi extends HoTro{
            use GayPhep;
            use AoDa;
            public function TanCong()
            {
                return $this->satThuong;
            }
            public function PhongThu(){
                return $this->doBenGiap;
            }
            public function Get_ViTri(){
                echo "{$this->ten} vi tri {$this->viTri}</br>";
            }
            public function ThienThachLua ()
            {
                echo "{$this->Get_ten()} tien hanh thien thanh lua </br>";
            }
            public function MuaSaoNo ()
            {
                echo "{$this->Get_ten()} tien hanh mua sao no </br>";
            }
            public function ThienNhanThuat ()
            {
                echo "{$this->Get_ten()} tien hanh thien nhan thuat </br>";
            }
        }
        $GiaoDien = array(
            'menu'=> function(){
                echo "1.choi binh thuong </br>";
                echo "2.choi don/doi xep hang </br>";
                echo "3.choi xep hang linh hoat </br>";
                echo "4.choi event </br>";
            },
            'chao'=> function(){
                echo "xin chao ban da dang nhap game </br>";
            },
            'intro'=> function(){
                echo "choi mot ban nhac </br>";
            }
        );
        echo "</br>";
        $GiaoDien['intro']();
        $GiaoDien['chao']();
        $GiaoDien['menu']();
        $yasuo= new SatThu(18,1,1200,18,'Dia 1 nam');
        $yone= new KyBinh(17,2,1200,17,'zeros V.V');
        $malphite= new BoBinh(16,3,3000,16,'maphai');
        $DanhSachNguoiChoi =array('Tai'=>$yasuo,'Nam'=>$yone,'bounmy'=>$malphite);

        $syndra = new PhapSu(15,4,1000,15,'showmaker');

        NguoiChoi::ThemNguoiChoi($DanhSachNguoiChoi,$syndra,'tuan');
        NguoiChoi::XuatThongTinToanBoNguoiChoi($DanhSachNguoiChoi);
        //event trong php sử dụng famework laravel
        // $response = Event::fire('ThongTinCapDau', array($yasuo,$yone));
        // Event::listen('event.login', function($player1, $player2){
        //     $player1->ThongTin();
        //     $player2->ThongTin();
        // });
        //================================================
        $yasuo->KetHopChieuThuc1($syndra);
        $syndra->ThongTin();
        echo "</br>";
        $DanhSachTuong = array($yasuo,$yone,$malphite);
        array_push($DanhSachTuong,$syndra);
        echo "sat thuong cua {$yone->Get_ten()} la = {$yone->Get_SatThuong()} </br>";
        echo "mau cua {$yasuo->Get_ten()} la = {$yasuo->Get_mau()} </br>";
        echo "phong thu cua {$yasuo->Get_ten()} la = {$yasuo->Get_DoBenGiap()} </br>";
        echo "{$yasuo->Get_ten()} phong thu,{$yone->Get_ten()} tan cong </br>";
        NguoiChoi::A_TanCong_B($yone,$yasuo);
        echo "mau cua {$yasuo->Get_ten()} la = {$yasuo->Get_mau()} </br>";
        echo "</br>";
        echo "Mau cua {$yasuo->Get_ten()} la = {$yasuo->Get_Mau()} </br>";
        echo "sat thuong cua {$yasuo->Get_ten()} la = {$yasuo->Get_SatThuong()} </br>";
        echo "mau cua {$yone->Get_ten()} la = {$yone->Get_mau()} </br>";
        echo "phong thu cua {$yone->Get_ten()} la = {$yone->Get_DoBenGiap()} </br>";
        echo "{$yone->Get_ten()} phong thu,{$yasuo->Get_ten()} ki nang khat mau </br>";
        NguoiChoi::A_KhatMau_B($yasuo,$yone);
        echo "mau cua {$yone->Get_ten()} la = {$yone->Get_mau()} </br>";
        echo "Mau cua {$yasuo->Get_ten()} la = {$yasuo->Get_Mau()} </br>";
        echo "</br> sat thuong cua {$syndra->Get_ten()} = {$syndra->Get_SatThuong()}";
        $syndra->TangSucManh();
        echo "</br> sat thuong cua {$syndra->Get_ten()} = {$syndra->Get_SatThuong()}";
        echo "</br> giap cua {$yasuo->Get_ten()} = {$yasuo->Get_SatThuong()}";
        $yone->LamChoang($yasuo);
        echo "</br> giap cua {$yasuo->Get_ten()} = {$yasuo->Get_DoBenGiap()}";
        echo "</br>";
        $yone->Get_ViTri();
        $syndra->Get_ViTri();
        $malphite->Get_ViTri(); 
        ?>
    </div>
</body>
</html>
